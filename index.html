<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>스파이를 찾아라</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <!-- 시작 화면 -->
    <div class="start-screen" id="startScreen">
        <h2>몰래몰레</h2>
        <p>두더지를 잡아라! 하지만 스파이를 조심해!</p>

        <div class="mole-demo">
            <div class="demo-item">
                <div class="demo-mole">
                    <div class="mole-char">
                        <div class="mole-ear left"></div>
                        <div class="mole-ear right"></div>
                        <div class="mole-body"></div>
                        <div class="mole-head">
                            <div class="spy-glasses">
                                <div class="glass left"></div>
                                <div class="glass-bridge"></div>
                                <div class="glass right"></div>
                            </div>
                            <div class="mole-eye left"><div class="pupil"></div></div>
                            <div class="mole-eye right"><div class="pupil"></div></div>
                            <div class="mole-snout"><div class="mole-nose"></div></div>
                        </div>
                    </div>
                </div>
                <div class="demo-label good">일반 두더지 (클릭!)</div>
            </div>
            <div class="demo-item">
                <div class="demo-mole spy">
                    <div class="mole-char">
                        <div class="mole-ear left"></div>
                        <div class="mole-ear right"></div>
                        <div class="mole-body"></div>
                        <div class="mole-head">
                            <div class="spy-glasses">
                                <div class="glass left"></div>
                                <div class="glass-bridge"></div>
                                <div class="glass right"></div>
                            </div>
                            <div class="mole-eye left"><div class="pupil"></div></div>
                            <div class="mole-eye right"><div class="pupil"></div></div>
                            <div class="mole-snout"><div class="mole-nose"></div></div>
                        </div>
                    </div>
                </div>
                <div class="demo-label bad">스파이 두더지 (피해!)</div>
            </div>
        </div>

        <div class="rules">
            <h3>게임 규칙</h3>
            <ul>
                <li>매 턴 두더지 3마리 등장 (일반 2 + 스파이 1)</li>
                <li>일반 두더지 1마리만 클릭하세요</li>
                <li>스파이 두더지(선글라스)를 클릭하면 게임 오버!</li>
                <li>시간 내에 클릭하지 못하면 게임 오버!</li>
            </ul>
        </div>

        <button class="btn" onclick="startGame()">게임 시작</button>
    </div>

    <!-- 게임 종료 화면 -->
    <div class="end-screen hidden" id="endScreen">
        <h2>게임 오버!</h2>
        <p id="endReason"></p>
        <div class="stats">
            <p>총 점수: <span id="finalScore">0</span>점</p>
            <p id="newRecordMsg" class="hidden new-record">🏆 신기록!</p>
            <p>최고 기록: <span id="allTimeBest">-</span>점</p>
            <p>평균 반응속도: <span id="avgReaction">0</span>ms</p>
            <p>최고 반응속도: <span id="bestReaction">0</span>ms</p>
            <hr style="border-color:rgba(255,255,255,0.2);margin:10px 0">
            <p>해당 스테이지 제한시간: <span id="stageTimeLimit">-</span>초</p>
            <p>두더지 등장 후 경과: <span id="elapsedTime">-</span>ms</p>
        </div>
        <button class="btn" onclick="startGame()">다시 시작</button>
    </div>

    <!-- 게임 화면 -->
    <div id="gameHeader">
        <h1>스파이 찾(임시)</h1>
        <div class="info-bar">
            <div class="info-item">점수: <span id="score">0</span></div>
            <div class="info-item">최고: <span id="bestScore">-</span></div>
            <div class="info-item">제한시간: <span id="timeLimit">0.8</span>초</div>
            <div class="info-item">경과: <span id="elapsedDisplay">-</span>ms</div>
        </div>
        <button id="pauseBtn" class="pause-btn hidden" onclick="togglePause()">⏸ 일시정지</button>
    </div>
    <div id="boardWrapper">
        <div class="game-container">
            <div class="grid" id="grid"></div>
        </div>
    </div>

    <!-- 물총 -->
    <div class="gun-wrap">
        <div class="gun" id="gun">
            <div class="gun-tank"></div>
            <div class="gun-barrel"></div>
            <div class="gun-muzzle"></div>
            <div class="gun-grip"></div>
            <div class="muzzle-point" id="muzzlePoint"></div>
        </div>
    </div>

    <!-- 선물 팝업 -->
    <div class="gift-popup hidden" id="giftPopup">
        <div class="gift-popup-box">
            <span class="gift-popup-emoji" id="giftEmoji">🎁</span>
            <h3>선물 획득!</h3>
            <p id="giftName">새 아이템</p>
            <button class="btn" id="giftClose">수집하기</button>
        </div>
    </div>

    <!-- 일시정지 오버레이 -->
    <div class="pause-overlay hidden" id="pauseOverlay">
        <h2>⏸ 일시정지</h2>
        <button class="btn" onclick="togglePause()">▶ 계속하기</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
